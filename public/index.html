<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Astro4 DUO â€” Compatibilidad CÃ³smica</title>
  <meta name="description" content="Descubre tu compatibilidad cÃ³smica usando 4 tradiciones: occidental, vÃ©dica, china y numerologÃ­a">
  <meta property="og:title" content="Astro4 DUO â€” Compatibilidad CÃ³smica">
  <meta property="og:description" content="Â¿QuÃ© tan compatibles son? DescÃºbrelo con 4 tradiciones astrolÃ³gicas">
  <meta property="og:image" content="/og-image.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0a0a1a">
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link rel="stylesheet" href="/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/astronomy.browser.min.js" defer></script>
</head>
<body>
  <div class="container">
    <!-- LANDING / INPUT -->
    <div id="screen-input">
      <header>
        <h1>âœ¨ Astro4 DUO</h1>
        <p class="tagline">Compatibilidad CÃ³smica â€” 4 tradiciones</p>
      </header>

      <div class="card">
        <h2>Â¿QuÃ© tan compatibles son?</h2>
        <div class="duo-columns">
          <div class="person-col">
            <h3>ğŸ‘¤ Persona 1</h3>
            <div class="form-group">
              <label for="name1">Nombre</label>
              <input type="text" id="name1" placeholder="Ej: MarÃ­a" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="fullname1">Nombre completo <span class="optional">(opcional)</span></label>
              <input type="text" id="fullname1" placeholder="Ej: MarÃ­a LÃ³pez GarcÃ­a" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="date1">Fecha de nacimiento</label>
              <input type="date" id="date1">
            </div>
          </div>
          <div class="divider-v">ğŸ’•</div>
          <div class="person-col">
            <h3>ğŸ‘¤ Persona 2</h3>
            <div class="form-group">
              <label for="name2">Nombre</label>
              <input type="text" id="name2" placeholder="Ej: Carlos" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="fullname2">Nombre completo <span class="optional">(opcional)</span></label>
              <input type="text" id="fullname2" placeholder="Ej: Carlos Ruiz PÃ©rez" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="date2">Fecha de nacimiento</label>
              <input type="date" id="date2">
            </div>
          </div>
        </div>
        <p class="hint">ğŸ’¡ El nombre completo activa numerologÃ­a avanzada (Alma + Destino)</p>
        <button id="btn-reveal" class="btn-primary" onclick="calculateCompatibility()">
          âœ¨ Revelar compatibilidad
        </button>
      </div>

      <div class="footer-links">
        <a href="https://astro4.duendes.app/" target="_blank">ğŸ”® Ver mi perfil Astro4 completo</a>
      </div>
    </div>

    <!-- RESULTADO -->
    <div id="screen-result" style="display:none">
      <header>
        <h1>âœ¨ Astro4 DUO</h1>
        <p class="tagline" id="result-names"></p>
      </header>

      <div class="card score-card">
        <div class="score-circle-wrapper">
          <svg class="score-ring" viewBox="0 0 200 200">
            <circle class="score-ring-bg" cx="100" cy="100" r="85" />
            <circle class="score-ring-fill" id="score-ring-fill" cx="100" cy="100" r="85" />
          </svg>
          <div class="score-number" id="score-number">0%</div>
        </div>
        <p class="score-label" id="score-label"></p>
      </div>

      <div class="card breakdown-card">
        <h2>Desglose por tradiciÃ³n</h2>
        <div class="tradition-bar" id="bar-western">
          <div class="tradition-header">
            <span class="tradition-icon">â˜€ï¸</span>
            <span class="tradition-name">Occidental</span>
            <span class="tradition-pct" id="pct-western">0%</span>
          </div>
          <div class="bar-track"><div class="bar-fill" id="fill-western"></div></div>
          <p class="tradition-detail" id="detail-western"></p>
        </div>
        <div class="tradition-bar" id="bar-vedic">
          <div class="tradition-header">
            <span class="tradition-icon">ğŸª·</span>
            <span class="tradition-name">VÃ©dico</span>
            <span class="tradition-pct" id="pct-vedic">0%</span>
          </div>
          <div class="bar-track"><div class="bar-fill" id="fill-vedic"></div></div>
          <p class="tradition-detail" id="detail-vedic"></p>
          <p class="tradition-extra" id="extra-vedic"></p>
        </div>
        <div class="tradition-bar" id="bar-chinese">
          <div class="tradition-header">
            <span class="tradition-icon">ğŸ‰</span>
            <span class="tradition-name">Chino</span>
            <span class="tradition-pct" id="pct-chinese">0%</span>
          </div>
          <div class="bar-track"><div class="bar-fill" id="fill-chinese"></div></div>
          <p class="tradition-detail" id="detail-chinese"></p>
        </div>
        <div class="tradition-bar" id="bar-numerology">
          <div class="tradition-header">
            <span class="tradition-icon">ğŸ”¢</span>
            <span class="tradition-name">NumerologÃ­a</span>
            <span class="tradition-pct" id="pct-numerology">0%</span>
          </div>
          <div class="bar-track"><div class="bar-fill" id="fill-numerology"></div></div>
          <p class="tradition-detail" id="detail-numerology"></p>
        </div>
      </div>

      <div class="card insight-card" id="insight-card" style="display:none">
        <h2>ğŸ’« Insight</h2>
        <p id="insight-text"></p>
      </div>

      <div class="action-buttons">
        <button class="btn-primary" onclick="shareResult()">ğŸ“¤ Compartir resultado</button>
        <button class="btn-secondary" onclick="resetForm()">ğŸ”„ Probar otra pareja</button>
        <a href="https://astro4.duendes.app/" target="_blank" class="btn-outline">ğŸ”® Ver perfil completo en Astro4</a>
      </div>
    </div>

    <footer>
      <p>Hecho por <a href="https://duendes.app" target="_blank">duendes.app</a> 2026</p>
      <button id="btn-install" style="display:none" onclick="installApp()">ğŸ“² Instalar App</button>
    </footer>
  </div>

  <script src="/js/astro-calc.js"></script>
  <script src="/js/compatibility-calc.js"></script>
  <script src="/js/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('/sw.js'); }
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault(); deferredPrompt = e;
      document.getElementById('btn-install').style.display = 'inline-block';
    });
    function installApp() { if (deferredPrompt) { deferredPrompt.prompt(); deferredPrompt=null; } }
  </script>
</body>
</html>
